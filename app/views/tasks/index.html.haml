%h1 任務列表
= search_form_for @query, class: 'mb-5' do |f|
  .form-group.row
    = f.label :name_cont, '任務名稱', class: 'col-sm-2 col-form-label'
    .col-sm-10
      = f.search_field :name_cont, class: 'form-control', style: 'width: auto;'

  .form-group.row
    = f.label :created_at, '建立日期', class: 'col-sm-2 col-form-label'
    .col-sm-10
      = f.search_field :created_at, class: 'form-control', style: 'width: auto;'
%br
= link_to('新增任務', new_task_path, class: 'btn btn-primary')
%br 
 
%table.table.table-hover
  %thead.thead-default
    %tr
      %th= sort_link(@query, :name, '任務名稱', [:name, created_at: :desc])
      %th= Task.human_attribute_name(:created_at)
      %th
  %tbody
    - @tasks.each do |task|
      %tr
        %td= link_to(task.name, task_path(task))
        %td= task.created_at
        %td
          = link_to('編輯', edit_task_path(task), class: 'btn btn-primary mr-3')
          = link_to('刪除', task, method: :delete, data: { confirm: "確定刪除 「#{task.name}」?"}, class: 'btn btn-danger')